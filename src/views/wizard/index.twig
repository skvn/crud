{% extends "crud::page" %}

{% block head %}
    <link href="{{ 'css/plugins/steps/jquery.steps.css'|asset }}" rel="stylesheet">
    <style>
        .wizard-big.wizard > .content {
            min-height: 700px;
        }
    </style>
{% endblock %}

{% block content %}
    {% if not alert %}
          <div class="col col-lg-6">
                <h1>Define models</h1>
                {% if  not wizard.modelsDefined() %}
                <form method="post">
                    <input type="hidden" name="_token" value="{{ csrf_token() }}"/>
                    {% endif %}
                    <table class="table table-striped">
                        <tr>
                            <th>Table</th>
                            <th>Model name</th>
                            <th width="100">Actions</th>
                        </tr>
                        {% for table in wizard.getTables() %}
                                <tr>

                                    <td>{{ table }}</td>
                                    <td>
                                        <form action="{{ route('wizard_model', table) }}" id="form_{{ table }}" method="get">
                                        {% if wizard.modelsDefined() %}
                                            {% if wizard.getModelConfig(table) %}
                                                <input type="text" class="form-control" name="models[{{ table }}]"
                                                       value="{{ wizard.getModelConfig(table).name }}" disabled/>
                                            {% else %}
                                                <input type="text" class="form-control" name="model"
                                                       placeholder="Enter model name * " required/>
                                            {% endif %}
                                        {% else %}
                                            <input type="text" class="form-control" name="models[{{ table }}]"/>
                                        {% endif %}
                                        </form>
                                    </td>
                                    <td>
                                        {% if wizard.getModelConfig(table) %}
                                            <a class="btn btn-success"
                                               href="{{ route('wizard_model', table) }}">Edit </a>
                                        {% else %}
                                            <input type="submit" form="form_{{ table }}" class="btn btn-primary" value="Create model and edit"/>
                                        {% endif %}
                                    </td>

                                </tr>

                        {% endfor %}
                    </table>
                    {% if not wizard.modelsDefined() %}
                        <input type="submit" class="btn btn-success" value="Save">
                    {% endif %}
                    {% if  not wizard.modelsDefined() %}
                </form>
                {% endif %}
            </div>

    {% else %}

        <div class="alert alert-danger" role="alert">{{ alert }}</div>

    {% endif %}
{% endblock %}

{% block bc %}
    <div class="navbar-header">
        <button type="button" class="navbar-expand-toggle">
            <i class="fa fa-bars icon"></i>
        </button>
        <ol class="breadcrumb navbar-breadcrumb">
            <li class="active">Models index</li>
        </ol>
        <button type="button" class="navbar-right-expand-toggle pull-right visible-xs">
            <i class="fa fa-th icon"></i>
        </button>
    </div>
{% endblock %}